#Mac or Linux

python3.11 -m venv .venv311

source .venv311/bin/activate   # On macOS/Linux

python -V                      # should show 3.11.x

pip -V                         # path should be .venv311





pip install -U pip wheel setuptools



# Torch (CPU) — pick the newest available on that index: 2.2.2

pip install "torch==2.2.2" --index-url https://download.pytorch.org/whl/cpu



# FAISS (broad macOS support)

pip install "faiss-cpu==1.8.0.post1"



# The rest (now resolver will be happy)

pip install "sentence-transformers>=3.0" "fastapi>=0.115" uvicorn \

           "SQLAlchemy>=2.0" "psycopg[binary]" pandas tqdm





#Windows

py -3.11 -m venv .venv311

.venv311\Scripts\Activate.ps1

.venv311\Scripts\activate.bat



python -V   # should say Python 3.11.x

pip -V      # path should show .venv311\Lib\site-packages



pip install torch==2.2.2 --index-url https://download.pytorch.org/whl/cpu



pip install faiss-cpu #it may fail. The Windows-friendly alternative is:



hnswlib (pip install hnswlib)

or

annoy (pip install annoy)



pip install "sentence-transformers>=3.0" "fastapi>=0.115" uvicorn ^

"SQLAlchemy>=2.0" "psycopg[binary]" pandas tqdm





python lesson2_build_index.py



uvicorn lesson2_search_api:app --reload




lesson_2_like_chatgpt_answer

pip install  "SQLAlchemy>=2.0" "psycopg[binary]" pgvector

# for  mac  users
# ensure PG15 is installed or any version you use
brew install postgresql@15

# build pgvector against PG15 (uses PG15's pg_config)
brew install git make
git clone https://github.com/pgvector/pgvector.git
cd pgvector
make PG_CONFIG="$(brew --prefix postgresql@15)/bin/pg_config"
make PG_CONFIG="$(brew --prefix postgresql@15)/bin/pg_config" install

# for linux users
export PGAPP="/Applications/Postgres.app/Contents/Versions/15"
git clone https://github.com/pgvector/pgvector.git
cd pgvector
make PG_CONFIG="$PGAPP/bin/pg_config"
make PG_CONFIG="$PGAPP/bin/pg_config" install

# for  windows users
Windows (EDB): open StackBuilder → add the pgvector extension for your server → restart service.

# everyone should do the below
ALTER TABLE public.quotes ADD COLUMN IF NOT EXISTS embedding vector(384);

CREATE INDEX IF NOT EXISTS quotes_embedding_ivfflat
  ON public.quotes USING ivfflat (embedding vector_cosine_ops) WITH (lists = 100);

ANALYZE public.quotes;

#paste in terminal
python lesson3_pgvector_backfill.py

uvicorn lesson2_like_chatgpt_answer:app --reload

